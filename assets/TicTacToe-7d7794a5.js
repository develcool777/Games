var L=Object.defineProperty;var A=(t,e,s)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var d=(t,e,s)=>(A(t,typeof e!="symbol"?e+"":e,s),s);import{M as H}from"./Main-66421d9f.js";import{d as b,h as m,_ as S,c as p,n as c,i as k,o as f,F as z,j as M,k as C,e as W,r as y,l as j,m as G,q as w,s as V,g as h,a as _,p as B,f as q,w as P,T as F,t as N}from"./index-60a8a639.js";const x=b({name:"Cell",props:{cell:{type:String,required:!0},player:{type:String,required:!0},gameStatus:{type:String,required:!0},isWin:{type:Boolean,required:!0}},setup(t){const e=m(!1),s=i=>t.cell===i||n(i),n=i=>t.cell===""&&t.player===i&&e.value;return{isHovered:e,isShow:s,defineHovered:n}}});function U(t,e,s,n,i,a){return f(),p("button",{type:"button",class:c(["cell",{win:t.isWin}]),title:"cell",onMouseover:e[0]||(e[0]=o=>t.isHovered=t.gameStatus==="start"),onMouseleave:e[1]||(e[1]=o=>t.isHovered=!1)},[t.isShow("o")?(f(),p("div",{key:0,class:c(["cell__o",{hovered:t.defineHovered("o")}])},null,2)):k("",!0),t.isShow("x")?(f(),p("div",{key:1,class:c(["cell__x",{hovered:t.defineHovered("x")}])},null,2)):k("",!0)],34)}const J=S(x,[["render",U],["__scopeId","data-v-a4462563"]]),X=b({name:"Board",components:{Cell:J},props:{board:{type:Object,required:!0},gameStatus:{type:String,required:!0},player:{type:String,required:!0},winCells:{type:Array,required:!0}},emits:["makeMove"],setup(t,e){return{makeMove:(o,r)=>{t.gameStatus!=="start"||r!==""||e.emit("makeMove",o)},defineCellStyle:()=>{const o=t.board.length===3?"150px":t.board.length===5?"100px":"80px";return{width:o,height:o}},defineFieldStyle:()=>{const o=t.board.length===3?"490px":t.board.length===5?"560px":"640px";return{width:o,height:o}},defineVerticalStyle:(o,r)=>{const u=t.board.length===3?150:t.board.length===5?100:80;return r?{top:`${u+o*(u+10)}px`}:{left:`${u+o*(u+10)}px`}}}}});function K(t,e,s,n,i,a){const o=y("Cell");return f(),p("section",{class:"field",style:C(t.defineFieldStyle())},[(f(!0),p(z,null,M(t.board.flat(),(r,u)=>(f(),W(o,{gameStatus:t.gameStatus,player:t.player,isWin:t.winCells.includes(u),cell:r,key:u,style:C(t.defineCellStyle()),onClick:l=>t.makeMove(u,r)},null,8,["gameStatus","player","isWin","cell","style","onClick"]))),128)),(f(!0),p(z,null,M(t.board.length-1,(r,u)=>(f(),p("div",{class:"field__line",key:r,style:C(t.defineVerticalStyle(u))},null,4))),128)),(f(!0),p(z,null,M(t.board.length-1,(r,u)=>(f(),p("div",{class:"field__line horizontal",key:r,style:C(t.defineVerticalStyle(u,!0))},null,4))),128))],4)}const Q=S(X,[["render",K],["__scopeId","data-v-ac435c43"]]),Y=(t,e)=>{const s=t[e];return s?typeof s=="function"?s():Promise.resolve(s):new Promise((n,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+e)))})},Z=b({name:"SvgIcon",props:{name:{type:String,required:!0},disableTransition:{type:Boolean,default:!1},disableColorinheritance:{type:Boolean,default:!1}},setup(t){return{svgComponent:j(()=>G(()=>Y(Object.assign({"./icons/Cancel.vue":()=>w(()=>import("./Cancel-1c3b469a.js"),["assets/Cancel-1c3b469a.js","assets/index-60a8a639.js","assets/index-863553dd.css"]),"./icons/Play.vue":()=>w(()=>import("./Play-ad6aaefb.js"),["assets/Play-ad6aaefb.js","assets/index-60a8a639.js","assets/index-863553dd.css"]),"./icons/Return.vue":()=>w(()=>import("./Return-61d6c383.js"),["assets/Return-61d6c383.js","assets/index-60a8a639.js","assets/index-863553dd.css"])}),`./icons/${t.name}.vue`))),defineClass:()=>({inherit:!t.disableColorinheritance,tr:!t.disableTransition})}}});function ee(t,e,s,n,i,a){return f(),W(V(t.svgComponent),{class:c(["SVG",t.defineClass()])},null,8,["class"])}const te=S(Z,[["render",ee]]),se=b({name:"Settings",components:{SvgIcon:te},props:{gameStatus:{type:String,required:!0},historyLen:{type:Number,required:!0},config:{type:Object,requird:!0}},emits:["start","cancel","returnMove","setConfig"],setup(t,e){return{start:()=>{t.gameStatus!=="start"&&e.emit("start")},cancel:()=>{t.gameStatus!==""&&e.emit("cancel")},returnMove:()=>{t.gameStatus!=="start"||t.historyLen===0||e.emit("returnMove")},setSize:l=>{var v;t.gameStatus==="start"||((v=t.config)==null?void 0:v.boardSize)===l||e.emit("setConfig",{boardSize:l})},setOpponent:l=>{e.emit("setConfig",{opponent:l})},setSide:l=>{e.emit("setConfig",{side:l})},setDifficulty:l=>{e.emit("setConfig",{difficulty:l})}}}});const $=t=>(B("data-v-7b948fe2"),t=t(),q(),t),ie={class:"set"},ne={class:"set__btns"},oe={class:"set__mode"},re=$(()=>h("h4",{class:"set__modeName"},"Board Size",-1)),ae={class:"set__variants"},le={class:"set__mode"},ue=$(()=>h("h4",{class:"set__modeName"},"Opponent",-1)),de={class:"set__variants"},he={class:"set__mode"},ve=$(()=>h("h4",{class:"set__modeName"},"Side",-1)),ce={class:"set__variants"},fe={class:"set__mode"},pe=$(()=>h("h4",{class:"set__modeName"},"Difficulty",-1)),ge={class:"set__variants"};function me(t,e,s,n,i,a){var r,u,l,v,I,O,E,R,T;const o=y("SvgIcon");return f(),p("section",ie,[h("div",ne,[h("button",{type:"button",class:"set__btn",title:"Play",onClick:e[0]||(e[0]=g=>t.start())},[_(o,{name:"Play",class:"set__svg"})]),h("button",{type:"button",class:"set__btn",title:"Cancel",onClick:e[1]||(e[1]=g=>t.cancel())},[_(o,{name:"Cancel",class:"set__svg"})]),h("button",{type:"button",class:"set__btn",title:"Return move",onClick:e[2]||(e[2]=g=>t.returnMove())},[_(o,{name:"Return",class:"set__svg"})])]),h("div",oe,[re,h("div",ae,[h("button",{type:"button",class:c(["set__variant",{active:((r=t.config)==null?void 0:r.boardSize)===3}]),onClick:e[3]||(e[3]=g=>t.setSize(3))},"3x3",2),h("button",{type:"button",class:c(["set__variant",{active:((u=t.config)==null?void 0:u.boardSize)===5}]),onClick:e[4]||(e[4]=g=>t.setSize(5))},"5x5",2),h("button",{type:"button",class:c(["set__variant",{active:((l=t.config)==null?void 0:l.boardSize)===7}]),onClick:e[5]||(e[5]=g=>t.setSize(7))},"7x7",2)])]),h("div",le,[ue,h("div",de,[h("button",{type:"button",class:c(["set__variant",{active:((v=t.config)==null?void 0:v.opponent)==="user"}]),onClick:e[6]||(e[6]=g=>t.setOpponent("user"))},"User",2),h("button",{type:"button",class:c(["set__variant",{active:((I=t.config)==null?void 0:I.opponent)==="comp"}]),onClick:e[7]||(e[7]=g=>t.setOpponent("comp"))},"Computer",2)])]),h("div",he,[ve,h("div",ce,[h("button",{type:"button",class:c(["set__variant",{active:((O=t.config)==null?void 0:O.side)==="x"}]),onClick:e[8]||(e[8]=g=>t.setSide("x"))},"X",2),h("button",{type:"button",class:c(["set__variant",{active:((E=t.config)==null?void 0:E.side)==="o"}]),onClick:e[9]||(e[9]=g=>t.setSide("o"))},"O",2)])]),h("div",fe,[pe,h("div",ge,[h("button",{type:"button",class:c(["set__variant",{active:((R=t.config)==null?void 0:R.difficulty)==="easy"}]),onClick:e[10]||(e[10]=g=>t.setDifficulty("easy"))},"Easy",2),h("button",{type:"button",class:c(["set__variant",{active:((T=t.config)==null?void 0:T.difficulty)==="hard"}]),onClick:e[11]||(e[11]=g=>t.setDifficulty("hard"))},"Hard",2)])])])}const _e=S(se,[["render",me],["__scopeId","data-v-7b948fe2"]]),ye=b({name:"Panel",props:{result:{type:String,required:!0},player:{type:String,required:!0},gameStatus:{type:String,required:!0}},setup(t){return{specifyResult:()=>{switch(t.result){case"x":return"Winner X";case"o":return"Winner O";case"d":return"Draw";case"":return""}},defineClass:n=>t.gameStatus===""?"":t.gameStatus==="start"?t.player===n?"active":"":t.result===n?"win":t.result==="d"?"draw":"lose"}}});const D=t=>(B("data-v-d188107c"),t=t(),q(),t),be={class:"panel"},Se=D(()=>h("div",{class:"panel__x"},null,-1)),Ce=[Se],$e=D(()=>h("p",{class:"panel__vs"},"VS",-1)),ze=D(()=>h("div",{class:"panel__o"},null,-1)),Me=[ze],we={key:0,class:"panel__result"};function ke(t,e,s,n,i,a){return f(),p("section",be,[h("div",{class:c(["panel__side left",t.defineClass("x")])},Ce,2),$e,h("div",{class:c(["panel__side rigth",t.defineClass("o")])},Me,2),_(F,{name:"fade"},{default:P(()=>[t.result!==""?(f(),p("div",we,N(t.specifyResult()),1)):k("",!0)]),_:1})])}const We=S(ye,[["render",ke],["__scopeId","data-v-d188107c"]]);class De{constructor(e,s){d(this,"board");d(this,"boardSize");d(this,"score");d(this,"aiSide");d(this,"makeMove",e=>{switch(e){case"easy":return this.easyMove();case"normal":return this.normalMove();case"hard":return this.hardMove()}});d(this,"isWin",e=>{const s=this.boardSize===3?3:4,n=e.reduce((i,a)=>(i.length===s||((a===""||i.length!==0&&i.at(-1)!==a)&&(i=[]),i.push(a)),i),[]);return n.length===s?n[0]:""});d(this,"defineResult",()=>{for(let s=0;s<this.boardSize;s++){const n=this.isWin(this.board[s]);if(n!=="")return n}for(let s=0;s<this.boardSize;s++){const n=this.board.map(a=>a[s]),i=this.isWin(n);if(i!=="")return i}const e=this.getDiagonals;for(let s=0;s<e.length;s++){const n=this.isWin(e[s]);if(n!=="")return n}return this.getAvailableMoves.length===0?"d":""});d(this,"easyMove",()=>{const e=this.getAvailableMoves;return e[Math.floor(Math.random()*e.length)]});d(this,"normalMove",()=>({x:1,y:1}));d(this,"hardMove",()=>{let e=-1/0,s=null;return this.getAvailableMoves.forEach(n=>{this.board[n.x][n.y]=this.aiSide;const i=this.minMax(0,!1);console.log(i),this.board[n.x][n.y]="",i>e&&(s=n,e=i)}),s});d(this,"minMax",(e,s)=>{const n=this.defineResult();if(n!=="")return this.score[n];if(s){let a=-1/0;return this.getAvailableMoves.forEach(o=>{this.board[o.x][o.y]=this.aiSide;const r=this.minMax(e+1,!1);a=Math.max(a,r),this.board[o.x][o.y]=""}),a}let i=1/0;return this.getAvailableMoves.forEach(a=>{this.board[a.x][a.y]=this.aiSide==="x"?"o":"x";const o=this.minMax(e+1,!0);i=Math.min(i,o),this.board[a.x][a.y]=""}),i});this.board=JSON.parse(JSON.stringify(e)),this.boardSize=this.board.length,this.aiSide=s,this.score={x:s==="x"?10:-10,o:s==="o"?10:-10,d:0}}get getDiagonals(){const e=this.boardSize===3?3:4,s=[];let n=[];const i=()=>{n.length>=e&&s.push(n),n=[]};for(let a=0;a<this.boardSize;a++){for(let o=0;o<this.boardSize;o++){const r=a+o;if(r>=this.boardSize)break;n.push(this.board[r][o])}i();for(let o=this.boardSize-1;o>=0;o--){const r=this.boardSize-1+a-o;if(r>=this.boardSize)break;n.push(this.board[r][o])}if(i(),a!==0){for(let o=0;o<this.boardSize;o++){const r=o-a;r<0||n.push(this.board[r][o])}i();for(let o=this.boardSize-1;o>=0;o--){const r=this.boardSize-1-a-o;r<0||n.push(this.board[r][o])}i()}}return s}get getAvailableMoves(){return this.board.reduce((e,s,n)=>(s.forEach((i,a)=>{i===""&&e.push({x:n,y:a})}),e),[])}}class Ie{constructor(e=3){d(this,"player");d(this,"board");d(this,"boardSize");d(this,"result");d(this,"history");d(this,"computer");d(this,"gameStatus");d(this,"winCells");d(this,"index1DTo2D",e=>({x:Math.floor(e/this.boardSize.value),y:e%this.boardSize.value}));d(this,"index2Dto1D",e=>e.x*this.boardSize.value+e.y);d(this,"userMove",e=>{if(this.gameStatus.value!=="start")throw Error("Game is not started");if(this.board.value[e.x][e.y]===void 0)throw Error("Wrong coordinates");if(this.board.value[e.x][e.y]!=="")throw Error("Cell is not empty");this.makeMove(e),this.computer.value.isComp&&this.compMove(),this.result.value!==""&&this.finishGame()});d(this,"compMove",()=>{if(this.result.value!=="")return;const s=new De(this.board.value,this.player.value).makeMove(this.computer.value.level);if(s===null)throw Error("AI move is null");this.makeMove(s)});d(this,"makeMove",e=>{this.board.value[e.x][e.y]=this.player.value,this.history.value.push({...e,cell:this.player.value}),this.player.value=this.player.value==="x"?"o":"x",this.defineResult()});d(this,"reset",()=>{this.player.value="x",this.result.value="",this.board.value=[["","",""],["","",""],["","",""]],this.board.value=this.createBoard(),this.gameStatus.value="",this.history.value=[],this.winCells.value=[]});d(this,"createBoard",()=>{const e=[];for(let s=0;s<this.boardSize.value;s++){const n=[];for(let i=0;i<this.boardSize.value;i++)n.push("");e.push(n)}return e});d(this,"returnMove",()=>{var n;if(this.gameStatus.value!=="start")throw Error("Game is not started");if(this.getHistoryLength===0)throw Error("History is empty");if(this.removeMove(),!this.computer.value.isComp||this.getHistoryLength===0)return;(this.computer.value.isFirst?"x":"o")!==((n=this.history.value.at(-1))==null?void 0:n.cell)&&this.removeMove()});d(this,"removeMove",()=>{const e=this.history.value.pop();if(e===void 0){this.player.value="x";return}this.board.value[e.x][e.y]="",this.player.value=e.cell});d(this,"isWin",(e,s)=>{if(e.length!==s.length)throw Error("row and rowCoordinates do not have same length");let n=[];const i=this.boardSize.value===3?3:4,a=e.reduce((r,u,l)=>(r.length===i||((u===""||r.length!==0&&r.at(-1)!==u)&&(r=[],n=[]),r.push(u),n.push(s[l])),r),[]),o=a.length===i;return o&&(this.result.value=a[0],this.winCells.value.push(...n)),o});d(this,"defineResult",()=>{const e=this.boardSize.value===3?5:7;if(this.getHistoryLength<e)return;const s=this.board.value;for(let i=0;i<this.boardSize.value;i++){const a=s.map((o,r)=>({x:i,y:r}));this.isWin(s[i],a)}for(let i=0;i<this.boardSize.value;i++){const a=s.map(r=>r[i]),o=s.map((r,u)=>({x:u,y:i}));this.isWin(a,o)}const n=this.getDiagonals;for(let i=0;i<n[0].length;i++)this.isWin(n[0][i],n[1][i]);this.result.value===""&&(this.result.value=this.getHistoryLength===this.amoutOfCells?"d":"")});d(this,"startGame",()=>{this.gameStatus.value="start",this.computer.value.isComp&&this.computer.value.isFirst&&this.compMove()});d(this,"finishGame",()=>{this.gameStatus.value="finish"});d(this,"defineConfig",e=>{e.boardSize&&(this.boardSize.value=e.boardSize),e.difficulty&&(this.computer.value.level=e.difficulty),e.opponent&&(this.computer.value.isComp=e.opponent==="comp"),e.side&&(this.computer.value.isFirst=e.side==="o"),this.reset()});if(![3,5,7].includes(e))throw Error("Wrong size for boardSize, expected: 3, 5, 7");this.player=m("x"),this.result=m(""),this.boardSize=m(e),this.board=m(this.createBoard()),this.computer=m({isComp:!1,isFirst:!1,level:"easy"}),this.gameStatus=m(""),this.history=m([]),this.winCells=m([])}get getPlayer(){return this.player.value}get getBoard(){return this.board.value}get getBoardSize(){return this.boardSize.value}get getResult(){return this.result.value}get getGameStatus(){return this.gameStatus.value}get getHistoryLength(){return this.history.value.length}get getWinCells(){return this.winCells.value.map(e=>this.index2Dto1D(e))}get getConfig(){return{boardSize:this.boardSize.value,opponent:this.computer.value.isComp?"comp":"user",side:this.computer.value.isFirst?"o":"x",difficulty:this.computer.value.level}}get amoutOfCells(){return Math.pow(this.boardSize.value,2)}get getDiagonals(){const e=this.boardSize.value===3?3:4,s=[],n=[];let i=[],a=[];const o=(u,l)=>{i.push({x:u,y:l}),a.push(this.board.value[u][l])},r=()=>{i.length>=e&&(s.push(i),n.push(a)),i=[],a=[]};for(let u=0;u<this.boardSize.value;u++){for(let l=0;l<this.boardSize.value;l++){const v=u+l;if(v>=this.boardSize.value)break;o(v,l)}r();for(let l=this.boardSize.value-1;l>=0;l--){const v=this.boardSize.value-1+u-l;if(v>=this.boardSize.value)break;o(v,l)}if(r(),u!==0){for(let l=0;l<this.boardSize.value;l++){const v=l-u;v<0||o(v,l)}r();for(let l=this.boardSize.value-1;l>=0;l--){const v=this.boardSize.value-1-u-l;v<0||o(v,l)}r()}}return[n,s]}}const Oe=b({name:"TicTacToe",components:{Main:H,Board:Q,Settings:_e,Panel:We},setup(){return{g:new Ie}}});const Ee={class:"tic__game"};function Re(t,e,s,n,i,a){const o=y("Panel"),r=y("Board"),u=y("Settings"),l=y("Main");return f(),W(l,{class:"tic"},{default:P(()=>[h("div",Ee,[_(o,{"game-status":t.g.getGameStatus,result:t.g.getResult,player:t.g.getPlayer},null,8,["game-status","result","player"]),_(r,{winCells:t.g.getWinCells,player:t.g.getPlayer,gameStatus:t.g.getGameStatus,board:t.g.getBoard,onMakeMove:e[0]||(e[0]=v=>t.g.userMove(t.g.index1DTo2D(v)))},null,8,["winCells","player","gameStatus","board"])]),_(u,{class:"tic__setting",historyLen:t.g.getHistoryLength,gameStatus:t.g.getGameStatus,config:t.g.getConfig,onReturnMove:e[1]||(e[1]=v=>t.g.returnMove()),onStart:e[2]||(e[2]=v=>t.g.startGame()),onSetConfig:e[3]||(e[3]=v=>t.g.defineConfig(v)),onCancel:e[4]||(e[4]=v=>t.g.reset())},null,8,["historyLen","gameStatus","config"])]),_:1})}const Pe=S(Oe,[["render",Re],["__scopeId","data-v-4e98ffce"]]);export{Pe as default};
