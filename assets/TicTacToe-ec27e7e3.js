var T=Object.defineProperty;var w=(t,e,s)=>e in t?T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var a=(t,e,s)=>(w(t,typeof e!="symbol"?e+"":e,s),s);import{M as I}from"./Main-b4d08a0e.js";import{d as _,h as l,_ as g,c as m,a as v,w as M,T as C,o as i,n as $,i as k,F as L,j as B,e as b,p as E,f as H,g as d,r as h,k as q,l as G,m as S,q as P}from"./index-2794d30e.js";const R=_({name:"Cell",props:{cell:{type:String,required:!0},player:{type:String,required:!0},gameStatus:{type:String,required:!0}},setup(t){const e=l(!1),s=o=>t.cell===o||r(o),r=o=>t.cell===""&&t.player===o&&e.value;return{isHovered:e,isShow:s,defineHovered:r}}});function z(t,e,s,r,o,u){return i(),m("button",{type:"button",class:"cell",onMouseover:e[0]||(e[0]=n=>t.isHovered=t.gameStatus==="start"),onMouseleave:e[1]||(e[1]=n=>t.isHovered=!1)},[v(C,{name:"fade"},{default:M(()=>[t.isShow("o")?(i(),m("div",{key:0,class:$(["cell__o",{hovered:t.defineHovered("o")}])},null,2)):k("",!0)]),_:1}),v(C,{name:"fade"},{default:M(()=>[t.isShow("x")?(i(),m("div",{key:0,class:$(["cell__x",{hovered:t.defineHovered("x")}])},null,2)):k("",!0)]),_:1})],32)}const D=g(R,[["render",z],["__scopeId","data-v-c94d9fdc"]]),O=_({name:"Board",components:{Cell:D},props:{board:{type:Object,required:!0},gameStatus:{type:String,required:!0},player:{type:String,required:!0}},emits:["makeMove"],setup(t,e){return{makeMove:r=>{t.gameStatus==="start"&&e.emit("makeMove",r)}}}});const y=t=>(E("data-v-2ec96fa3"),t=t(),H(),t),V={class:"field"},A=y(()=>d("div",{class:"field__line v1"},null,-1)),F=y(()=>d("div",{class:"field__line v2"},null,-1)),N=y(()=>d("div",{class:"field__line horizontal h1"},null,-1)),j=y(()=>d("div",{class:"field__line horizontal h2"},null,-1));function U(t,e,s,r,o,u){const n=h("Cell");return i(),m("section",V,[(i(!0),m(L,null,B(t.board.flat(),(c,f)=>(i(),b(n,{gameStatus:t.gameStatus,player:t.player,cell:c,key:f,onClick:p=>t.makeMove(f)},null,8,["gameStatus","player","cell","onClick"]))),128)),A,F,N,j])}const W=g(O,[["render",U],["__scopeId","data-v-2ec96fa3"]]),x=(t,e)=>{const s=t[e];return s?typeof s=="function"?s():Promise.resolve(s):new Promise((r,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+e)))})},J=_({name:"SvgIcon",props:{name:{type:String,required:!0},disableTransition:{type:Boolean,default:!1},disableColorinheritance:{type:Boolean,default:!1}},setup(t){return{svgComponent:q(()=>G(()=>x(Object.assign({"./icons/Cancel.vue":()=>S(()=>import("./Cancel-b622e3d4.js"),["assets/Cancel-b622e3d4.js","assets/index-2794d30e.js","assets/index-863553dd.css"]),"./icons/Play.vue":()=>S(()=>import("./Play-8b36e964.js"),["assets/Play-8b36e964.js","assets/index-2794d30e.js","assets/index-863553dd.css"]),"./icons/Return.vue":()=>S(()=>import("./Return-cdd26f19.js"),["assets/Return-cdd26f19.js","assets/index-2794d30e.js","assets/index-863553dd.css"])}),`./icons/${t.name}.vue`))),defineClass:()=>({inherit:!t.disableColorinheritance,tr:!t.disableTransition})}}});function K(t,e,s,r,o,u){return i(),b(P(t.svgComponent),{class:$(["SVG",t.defineClass()])},null,8,["class"])}const Q=g(J,[["render",K]]),X=_({name:"Settings",components:{SvgIcon:Q},props:{gameStatus:{type:String,required:!0},historyLen:{type:Number,required:!0}},emits:["start","cancel","returnMove"],setup(t,e){return{start:()=>{t.gameStatus!=="start"&&e.emit("start")},cancel:()=>{t.gameStatus!==""&&e.emit("cancel")},returnMove:()=>{t.gameStatus!=="start"||t.historyLen===0||e.emit("returnMove")}}}});const Y={class:"set"},Z={class:"set__btns"},ee={type:"button",title:"Cancel"},te={type:"button",title:"Return move"};function se(t,e,s,r,o,u){const n=h("SvgIcon");return i(),m("section",Y,[d("div",Z,[d("button",{type:"button",title:"Play",onClick:e[0]||(e[0]=c=>t.start())},[v(n,{name:"Play",class:"set__svg"})]),d("button",ee,[v(n,{name:"Cancel",class:"set__svg",onClick:e[1]||(e[1]=c=>t.cancel())})]),d("button",te,[v(n,{name:"Return",class:"set__svg",onClick:e[2]||(e[2]=c=>t.returnMove())})])])])}const re=g(X,[["render",se],["__scopeId","data-v-7686c1c8"]]);class oe{constructor(){a(this,"player");a(this,"board");a(this,"boardSize");a(this,"result");a(this,"history");a(this,"computer");a(this,"gameStatus");a(this,"index1DTo2D",e=>({x:Math.floor(e/this.boardSize.value),y:e%this.boardSize.value}));a(this,"userMove",e=>{if(this.gameStatus.value!=="start")throw Error("Game is not started");if(this.board.value[e.x][e.y]===void 0)throw Error("Wrong coordinates");if(this.board.value[e.x][e.y]!=="")throw Error("Cell is not empty");this.makeMove(e),this.computer.value.isComp&&this.compMove(),this.result.value!==""&&this.finishGame()});a(this,"makeMove",e=>{this.board.value[e.x][e.y]=this.player.value,this.history.value.push({...e,cell:this.player.value}),this.player.value=this.player.value==="x"?"o":"x",this.result.value=this.defineResult()});a(this,"compMove",()=>{if(this.result.value!=="")return;const e=this.getAvailableMoves;switch(this.computer.value.mode){case"easy":return this.makeMove(e[Math.floor(Math.random()*e.length)]);case"hard":return this.makeMove(e[Math.floor(Math.random()*e.length)])}});a(this,"reset",()=>{this.player.value="x",this.result.value="",this.board.value=[["","",""],["","",""],["","",""]],this.gameStatus.value="",this.history.value=[]});a(this,"returnMove",()=>{var e,s;if(this.gameStatus.value!=="start")throw Error("Game is not started");if(this.getHistoryLength===0)throw Error("History is empty");this.removeMove(),this.computer.value.isComp&&this.getHistoryLength!==0&&(this.computer.value.isFirst?"x":"o")!==((e=this.history.value.at(-1))==null?void 0:e.cell)&&this.removeMove(),this.player.value=((s=this.history.value.at(-1))==null?void 0:s.cell)??"x"});a(this,"removeMove",()=>{const e=this.history.value.pop();e!==void 0&&(this.board.value[e.x][e.y]="")});a(this,"defineResult",()=>{if(this.getHistoryLength<5)return"";const e=(r,o,u)=>r===o&&o===u&&r!=="",s=this.board.value;return e(...s[0])?s[0][0]:e(...s[1])?s[1][0]:e(...s[2])?s[2][0]:e(...s.map(r=>r[0]))?s[0][0]:e(...s.map(r=>r[1]))?s[0][1]:e(...s.map(r=>r[2]))?s[0][2]:e(s[0][0],s[1][1],s[2][2])||e(s[0][2],s[1][1],s[2][0])?s[1][1]:this.getHistoryLength===this.amoutOfCells?"d":""});a(this,"startGame",()=>{this.gameStatus.value="start",this.computer.value.isComp&&this.computer.value.isFirst&&this.compMove()});a(this,"finishGame",()=>{this.gameStatus.value="finish"});this.player=l("x"),this.result=l(""),this.board=l([["","",""],["","",""],["","",""]]),this.computer=l({isComp:!1,isFirst:!1,mode:"easy"}),this.gameStatus=l(""),this.boardSize=l(3),this.history=l([])}get getPlayer(){return this.player.value}get getBoard(){return this.board.value}get getBoardSize(){return this.boardSize.value}get getResult(){return this.result.value}get getGameStatus(){return this.gameStatus.value}get getHistoryLength(){return this.history.value.length}get amoutOfCells(){return Math.pow(this.boardSize.value,2)}get getAvailableMoves(){return this.board.value.reduce((e,s,r)=>(s.forEach((o,u)=>{o===""&&e.push({x:r,y:u})}),e),[])}}const ae=_({name:"TicTacToe",components:{Main:I,Board:W,Settings:re},setup(){return{g:new oe}}});function ne(t,e,s,r,o,u){const n=h("Board"),c=h("Settings"),f=h("Main");return i(),b(f,{class:"tic"},{default:M(()=>[v(n,{player:t.g.getPlayer,gameStatus:t.g.getGameStatus,board:t.g.getBoard,onMakeMove:e[0]||(e[0]=p=>t.g.userMove(t.g.index1DTo2D(p)))},null,8,["player","gameStatus","board"]),v(c,{historyLen:t.g.getHistoryLength,gameStatus:t.g.getGameStatus,onReturnMove:e[1]||(e[1]=p=>t.g.returnMove()),onStart:e[2]||(e[2]=p=>t.g.startGame()),onCancel:e[3]||(e[3]=p=>t.g.reset())},null,8,["historyLen","gameStatus"])]),_:1})}const de=g(ae,[["render",ne],["__scopeId","data-v-54e47c20"]]);export{de as default};
